/*! For license information please see loader.js.LICENSE.txt */
!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="/",__webpack_require__(__webpack_require__.s=25)}([function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";function noop(){}__webpack_require__.d(__webpack_exports__,"a",(function(){return SvelteComponent})),__webpack_require__.d(__webpack_exports__,"b",(function(){return append})),__webpack_require__.d(__webpack_exports__,"c",(function(){return attr})),__webpack_require__.d(__webpack_exports__,"d",(function(){return binding_callbacks})),__webpack_require__.d(__webpack_exports__,"e",(function(){return check_outros})),__webpack_require__.d(__webpack_exports__,"f",(function(){return create_component})),__webpack_require__.d(__webpack_exports__,"g",(function(){return destroy_component})),__webpack_require__.d(__webpack_exports__,"h",(function(){return detach})),__webpack_require__.d(__webpack_exports__,"i",(function(){return element})),__webpack_require__.d(__webpack_exports__,"j",(function(){return empty})),__webpack_require__.d(__webpack_exports__,"k",(function(){return get_store_value})),__webpack_require__.d(__webpack_exports__,"l",(function(){return globals})),__webpack_require__.d(__webpack_exports__,"m",(function(){return group_outros})),__webpack_require__.d(__webpack_exports__,"n",(function(){return init})),__webpack_require__.d(__webpack_exports__,"o",(function(){return insert})),__webpack_require__.d(__webpack_exports__,"p",(function(){return is_function})),__webpack_require__.d(__webpack_exports__,"q",(function(){return mount_component})),__webpack_require__.d(__webpack_exports__,"r",(function(){return noop})),__webpack_require__.d(__webpack_exports__,"s",(function(){return onDestroy})),__webpack_require__.d(__webpack_exports__,"t",(function(){return onMount})),__webpack_require__.d(__webpack_exports__,"u",(function(){return run_all})),__webpack_require__.d(__webpack_exports__,"v",(function(){return safe_not_equal})),__webpack_require__.d(__webpack_exports__,"w",(function(){return set_data})),__webpack_require__.d(__webpack_exports__,"x",(function(){return set_style})),__webpack_require__.d(__webpack_exports__,"y",(function(){return space})),__webpack_require__.d(__webpack_exports__,"z",(function(){return text})),__webpack_require__.d(__webpack_exports__,"A",(function(){return toggle_class})),__webpack_require__.d(__webpack_exports__,"B",(function(){return transition_in})),__webpack_require__.d(__webpack_exports__,"C",(function(){return transition_out}));function run(fn){return fn()}function blank_object(){return Object.create(null)}function run_all(fns){fns.forEach(run)}function is_function(thing){return"function"==typeof thing}function safe_not_equal(a,b){return a!=a?b==b:a!==b||a&&"object"==typeof a||"function"==typeof a}function subscribe(store,callback){const unsub=store.subscribe(callback);return unsub.unsubscribe?()=>unsub.unsubscribe():unsub}function get_store_value(store){let value;return subscribe(store,_=>value=_)(),value}new Set;function append(target,node){target.appendChild(node)}function insert(target,node,anchor){target.insertBefore(node,anchor||null)}function detach(node){node.parentNode.removeChild(node)}function element(name){return document.createElement(name)}function text(data){return document.createTextNode(data)}function space(){return text(" ")}function empty(){return text("")}function attr(node,attribute,value){null==value?node.removeAttribute(attribute):node.getAttribute(attribute)!==value&&node.setAttribute(attribute,value)}function set_data(text,data){data=""+data,text.data!==data&&(text.data=data)}function set_style(node,key,value,important){node.style.setProperty(key,value,important?"important":"")}function toggle_class(element,name,toggle){element.classList[toggle?"add":"remove"](name)}let current_component;function set_current_component(component){current_component=component}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(fn){get_current_component().$$.on_mount.push(fn)}function onDestroy(fn){get_current_component().$$.on_destroy.push(fn)}const dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(fn){render_callbacks.push(fn)}function flush(){const seen_callbacks=new Set;do{for(;dirty_components.length;){const component=dirty_components.shift();set_current_component(component),update(component.$$)}for(;binding_callbacks.length;)binding_callbacks.pop()();for(let i=0;i<render_callbacks.length;i+=1){const callback=render_callbacks[i];seen_callbacks.has(callback)||(callback(),seen_callbacks.add(callback))}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1}function update($$){if(null!==$$.fragment){$$.update(),run_all($$.before_update);const dirty=$$.dirty;$$.dirty=[-1],$$.fragment&&$$.fragment.p($$.ctx,dirty),$$.after_update.forEach(add_render_callback)}}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(block,local){block&&block.i&&(outroing.delete(block),block.i(local))}function transition_out(block,local,detach,callback){if(block&&block.o){if(outroing.has(block))return;outroing.add(block),outros.c.push(()=>{outroing.delete(block),callback&&(detach&&block.d(1),callback())}),block.o(local)}}const globals="undefined"!=typeof window?window:global;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let SvelteElement;function create_component(block){block&&block.c()}function mount_component(component,target,anchor){const{fragment:fragment,on_mount:on_mount,on_destroy:on_destroy,after_update:after_update}=component.$$;fragment&&fragment.m(target,anchor),add_render_callback(()=>{const new_on_destroy=on_mount.map(run).filter(is_function);on_destroy?on_destroy.push(...new_on_destroy):run_all(new_on_destroy),component.$$.on_mount=[]}),after_update.forEach(add_render_callback)}function destroy_component(component,detaching){const $$=component.$$;null!==$$.fragment&&(run_all($$.on_destroy),$$.fragment&&$$.fragment.d(detaching),$$.on_destroy=$$.fragment=null,$$.ctx=[])}function init(component,options,instance,create_fragment,not_equal,props,dirty=[-1]){const parent_component=current_component;set_current_component(component);const prop_values=options.props||{},$$=component.$$={fragment:null,ctx:null,props:props,update:noop,not_equal:not_equal,bound:blank_object(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(parent_component?parent_component.$$.context:[]),callbacks:blank_object(),dirty:dirty};let ready=!1;$$.ctx=instance?instance(component,prop_values,(i,ret,value=ret)=>($$.ctx&&not_equal($$.ctx[i],$$.ctx[i]=value)&&($$.bound[i]&&$$.bound[i](value),ready&&function(component,i){-1===component.$$.dirty[0]&&(dirty_components.push(component),schedule_update(),component.$$.dirty.fill(0)),component.$$.dirty[i/31|0]|=1<<i%31}(component,i)),ret)):[],$$.update(),ready=!0,run_all($$.before_update),$$.fragment=!!create_fragment&&create_fragment($$.ctx),options.target&&(options.hydrate?$$.fragment&&$$.fragment.l(function(element){return Array.from(element.childNodes)}(options.target)):$$.fragment&&$$.fragment.c(),options.intro&&transition_in(component.$$.fragment),mount_component(component,options.target,options.anchor),flush()),set_current_component(parent_component)}"function"==typeof HTMLElement&&(SvelteElement=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const key in this.$$.slotted)this.appendChild(this.$$.slotted[key])}attributeChangedCallback(attr,_oldValue,newValue){this[attr]=newValue}$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set(){}});class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(type,callback){const callbacks=this.$$.callbacks[type]||(this.$$.callbacks[type]=[]);return callbacks.push(callback),()=>{const index=callbacks.indexOf(callback);-1!==index&&callbacks.splice(index,1)}}$set(){}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return apiUrl}));function apiUrl(url){return"https://api.staging.documentcloud.org/api/"+url}},function(module,__webpack_exports__,__webpack_require__){"use strict";var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(8),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__);const session=axios__WEBPACK_IMPORTED_MODULE_0___default.a.create({xsrfCookieName:"csrftoken",xsrfHeaderName:"X-CSRFToken",withCredentials:!0,headers:{"X-Requested-With":"XMLHttpRequest"}});session.interceptors.response.use(response=>response,error=>error.response&&error.response.data?Promise.reject({errorData:error.response.data}):Promise.reject(error));const sessionCache=new class{constructor(){this.cached=[],this.cachedByUrl={}}trimCache(){for(;this.cached.length>50;){const{url:url}=this.cached.shift();delete this.cachedByUrl[url]}}cache(url,contents){this.cached.push({url:url,contents:contents}),this.cachedByUrl[url]=contents,this.trimCache()}has(url){return this.cachedByUrl.hasOwnProperty(url)}lookup(url){return this.has(url)?this.cachedByUrl[url]:null}};session.getStatic=async function(url){if(sessionCache.has(url))return sessionCache.lookup(url);if(url.startsWith("https://api.staging.documentcloud.org")){const redirectUrl=(await session.get(url)).data.location,result=(await axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(redirectUrl)).data;return sessionCache.cache(url,result),result}{const result=(await axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(url)).data;return sessionCache.cache(url,result),result}},__webpack_exports__.a=session},function(module,__webpack_exports__,__webpack_require__){"use strict";function urlParts(url){const qIndex=url.indexOf("?");return-1==qIndex?[url,null]:[url.substr(0,qIndex),url.substr(qIndex+1)]}function getQueryStringParamsFromQuery(query){return null==query?{}:query.split("&").reduce((params,param)=>{let[key,value]=param.split("=");return params[key]=value?decodeURIComponent(value.replace(/\+/g," ")):"",params},{})}function queryBuilder(baseUrl,params,cleanSlate=!1){null==baseUrl&&(baseUrl=window.location.pathname+window.location.search);const[url,query]=urlParts(baseUrl),oldParams=cleanSlate?{}:getQueryStringParamsFromQuery(query);for(const prop in params)params.hasOwnProperty(prop)&&(oldParams[prop]=params[prop]);let result="",prefix="?";for(const prop in oldParams)if(oldParams.hasOwnProperty(prop)){const key=prop,value=oldParams[key];if(null==value)continue;result+=`${prefix}${key}=${encodeURIComponent(value)}`,prefix="&"}return`${url}${result}`}__webpack_require__.d(__webpack_exports__,"a",(function(){return queryBuilder}))},function(module,exports,__webpack_require__){"use strict";var bind=__webpack_require__(15),toString=Object.prototype.toString;function isArray(val){return"[object Array]"===toString.call(val)}function isUndefined(val){return void 0===val}function isObject(val){return null!==val&&"object"==typeof val}function isFunction(val){return"[object Function]"===toString.call(val)}function forEach(obj,fn){if(null!=obj)if("object"!=typeof obj&&(obj=[obj]),isArray(obj))for(var i=0,l=obj.length;i<l;i++)fn.call(null,obj[i],i,obj);else for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&fn.call(null,obj[key],key,obj)}module.exports={isArray:isArray,isArrayBuffer:function(val){return"[object ArrayBuffer]"===toString.call(val)},isBuffer:function(val){return null!==val&&!isUndefined(val)&&null!==val.constructor&&!isUndefined(val.constructor)&&"function"==typeof val.constructor.isBuffer&&val.constructor.isBuffer(val)},isFormData:function(val){return"undefined"!=typeof FormData&&val instanceof FormData},isArrayBufferView:function(val){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(val):val&&val.buffer&&val.buffer instanceof ArrayBuffer},isString:function(val){return"string"==typeof val},isNumber:function(val){return"number"==typeof val},isObject:isObject,isUndefined:isUndefined,isDate:function(val){return"[object Date]"===toString.call(val)},isFile:function(val){return"[object File]"===toString.call(val)},isBlob:function(val){return"[object Blob]"===toString.call(val)},isFunction:isFunction,isStream:function(val){return isObject(val)&&isFunction(val.pipe)},isURLSearchParams:function(val){return"undefined"!=typeof URLSearchParams&&val instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:forEach,merge:function merge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=merge(result[key],val):result[key]=val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},deepMerge:function deepMerge(){var result={};function assignValue(val,key){"object"==typeof result[key]&&"object"==typeof val?result[key]=deepMerge(result[key],val):result[key]="object"==typeof val?deepMerge({},val):val}for(var i=0,l=arguments.length;i<l;i++)forEach(arguments[i],assignValue);return result},extend:function(a,b,thisArg){return forEach(b,(function(val,key){a[key]=thisArg&&"function"==typeof val?bind(val,thisArg):val})),a},trim:function(str){return str.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return DEFAULT_ORDERING})),__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_EXPAND}));const DEFAULT_ORDERING="-created_at",DEFAULT_EXPAND=["user","organization"].join(",")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return svue_Svue}));var internal=__webpack_require__(0);const subscriber_queue=[];function writable(value,start=internal.r){let stop;const subscribers=[];function set(new_value){if(Object(internal.v)(value,new_value)&&(value=new_value,stop)){const run_queue=!subscriber_queue.length;for(let i=0;i<subscribers.length;i+=1){const s=subscribers[i];s[1](),subscriber_queue.push(s,value)}if(run_queue){for(let i=0;i<subscriber_queue.length;i+=2)subscriber_queue[i][0](subscriber_queue[i+1]);subscriber_queue.length=0}}}return{set:set,update:function(fn){set(fn(value))},subscribe:function(run,invalidate=internal.r){const subscriber=[run,invalidate];return subscribers.push(subscriber),1===subscribers.length&&(stop=start(set)||internal.r),run(value),()=>{const index=subscribers.indexOf(subscriber);-1!==index&&subscribers.splice(index,1),0===subscribers.length&&(stop(),stop=null)}}}}function derived(stores,fn,initial_value){const single=!Array.isArray(stores),stores_array=single?[stores]:stores,auto=fn.length<2;return{subscribe:writable(initial_value,set=>{let inited=!1;const values=[];let pending=0,cleanup=internal.r;const sync=()=>{if(pending)return;cleanup();const result=fn(single?values[0]:values,set);auto?set(result):cleanup=Object(internal.p)(result)?result:internal.r},unsubscribers=stores_array.map((store,i)=>store.subscribe(value=>{values[i]=value,pending&=~(1<<i),inited&&sync()},()=>{pending|=1<<i}));return inited=!0,sync(),function(){Object(internal.u)(unsubscribers),cleanup()}}).subscribe}}const STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ARGUMENT_NAMES=/([^\s,]+)/g,QUICK_ARROW=/^\s*([a-zA-Z0-9$_]+)\s*=>/;function getParamNames(func){const fnStr=func.toString().replace(STRIP_COMMENTS,""),quickMatch=fnStr.match(QUICK_ARROW);if(null!=quickMatch)return[quickMatch[1]];const result=fnStr.slice(fnStr.indexOf("(")+1,fnStr.indexOf(")")).match(ARGUMENT_NAMES);if(null===result)return[];const arrowIdx=result.indexOf("=>");return-1!=arrowIdx?result.slice(0,arrowIdx):result}class svue_Svue{constructor(structure){this.data={},this.writables={},this.subscribeId=0,this.subscribers={},null!=structure.data&&this.initData(structure.data),null!=structure.computed&&this.initComputed(structure.computed),null!=structure.watch&&this.initWatch(structure.watch)}subscribe(fn){fn(this);const subscribeId=this.subscribeId++;return this.subscribers[subscribeId]=fn,()=>{delete this.subscribers[subscribeId]}}pingSubscriptions(){Object.keys(this.subscribers).forEach(subscriber=>{this.subscribers[subscriber](this)})}initData(data){const destructured=data();Object.keys(destructured).forEach(key=>{let w=destructured[key];null!=w&&w.set&&w.subscribe||(w=writable(w)),this.writables[key]=w,Object.defineProperty(this,key,{get:()=>Object(internal.k)(w),set(newValue){w.set(newValue)}}),w.subscribe(()=>this.pingSubscriptions())})}initComputed(computed){const keys=Object.keys(computed);for(;0!=keys.length;){let matched=!1;for(let i=0;i<keys.length;i++){const key=keys[i],args=getParamNames(computed[key]);if(!args.every(arg=>null!=this.writables[arg]))continue;matched=!0;const d=derived(args.map(a=>this.writables[a]),(args,setFn)=>{const result=computed[key].bind(this)(...args);result&&"function"==typeof result.then?result.then(x=>setFn(x)):setFn(result)});this.writables[key]=d,Object.defineProperty(this,key,{get:()=>Object(internal.k)(d)}),d.subscribe(()=>this.pingSubscriptions()),keys.splice(i,1),i--}if(!matched)throw new Error("INVALID COMPUTED")}}initWatch(watch){Object.keys(watch).forEach(key=>{key.split(".").reduce((x,k)=>x.writables[k],this).subscribe(watch[key].bind(this))})}set(key,value){if(!(key instanceof svue_Svue)){if(null==this.writables[key])throw new Error("Invalid key: "+key);this.writables[key].set(value)}}update(fn){let key=getParamNames(fn);if(key.length>1)throw new Error("Only specify one arg for update");if(key=key[0],null==this.writables[key])throw new Error("Invalid key: "+key);this.writables[key].update(fn)}get(key){return Object(internal.k)(this.writables[key])}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Note}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6);function getDefault(obj,defaultValue=""){return null==obj?defaultValue:obj}class Note extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(rawNote,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.note=rawNote,data},computed:{...null==structure.computed?{}:structure.computed,id:note=>note.id,title:note=>getDefault(note.title),content:note=>getDefault(note.content),access:note=>getDefault(note.access,"private"),page:note=>note.page_number,isPageNote:note=>null==note.x1,x1:note=>note.x1,x2:note=>note.x2,y1:note=>note.y1,y2:note=>note.y2,width:(x1,x2)=>x2-x1,height:(y1,y2)=>y2-y1,username:note=>getDefault(note.user,{name:""}).name,organization(note){const org=getDefault(note.organization,{});return org.individual?null:org.name}}})}}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(26)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return grabAllPages}));var _api_session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);const MAX_PER_PAGE=parseInt("100");async function grabAllPages(url,perPage=MAX_PER_PAGE){null!=perPage&&(url=Object(_url__WEBPACK_IMPORTED_MODULE_1__.a)(url,{per_page:perPage}));const{data:data}=await _api_session__WEBPACK_IMPORTED_MODULE_0__.a.get(url),results=data.results;if(null!=data.next){const next=await grabAllPages(data.next);return results.concat(next)}return results}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return document_Document})),__webpack_require__.d(__webpack_exports__,"b",(function(){return transformHighlights}));var svue=__webpack_require__(6);function simplePlural(value,string){return string+(1!=value?"s":"")}function uniquify(array,fieldAccess=(x=>x.id)){let unique={};const results=[];for(let i=array.length-1;i>=0;i--){const obj=array[i],field=fieldAccess(obj);null==unique[field]&&(results.push(obj),unique[field]=!0)}return results}var structure_note=__webpack_require__(7);class section_Section extends svue.a{constructor(rawSection,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.section=rawSection,data},computed:{...null==structure.computed?{}:structure.computed,id:section=>section.id,page:section=>section.page_number,title:section=>section.title}})}}const PAGE_NO_RE=/^page_no_(\d+)$/;class document_Document extends svue.a{constructor(rawDocument,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.doc=rawDocument,data.lastProgress=null,data.lastImagesProcessed=null,data.lastTextsProcessed=null,data.highlightStart="<em>",data.highlightEnd="</em>",data},computed:{...null==structure.computed?{}:structure.computed,id:doc=>doc.id,slug:doc=>doc.slug,slugId:(id,slug)=>[id,slug].join("-"),canonicalUrl:slugId=>"https://www.staging.documentcloud.org/documents/"+slugId,pageUrl:canonicalUrl=>page=>`${canonicalUrl}#document/p${page}`,noteUrl:pageUrl=>note=>`${pageUrl(note.page+1)}/a${note.id}`,fakeNoteUrl:canonicalUrl=>note=>`${canonicalUrl}/annotations/${note.id}`,title:doc=>doc.title,pageCount:doc=>doc.page_count,userName:doc=>doc.user.name,rawOrganization:doc=>doc.organization,individualOrg:rawOrganization=>rawOrganization.individual,organizationName:rawOrganization=>rawOrganization.name,assetUrl:doc=>doc.asset_url,pdf:(assetUrl,id,slug)=>`${assetUrl}documents/${id}/${slug}.pdf`,thumbnail:(assetUrl,id,slug,updatedAtTimestamp)=>`${assetUrl}documents/${id}/pages/${slug}-p1-small.gif?ts=${updatedAtTimestamp}`,rawCreatedAt:doc=>doc.created_at,createdAt:rawCreatedAt=>new Date(Date.parse(rawCreatedAt)),rawUpdatedAt:doc=>doc.updated_at,updatedAtTimestamp:rawUpdatedAt=>Date.parse(rawUpdatedAt),updatedAt:updatedAtTimestamp=>new Date(updatedAtTimestamp),pageSpec:doc=>doc.page_spec,pageSizes:pageSpec=>null==pageSpec?null:function(pageSpec){if(0==pageSpec.trim().length)return[];const parts=pageSpec.split(";"),sizes=[];for(let i=0;i<parts.length;i++){const part=parts[i],[size,range]=part.split(":"),[width,height]=size.split("x").map(parseFloat),aspect=height/width,rangeParts=range.split(",");for(let j=0;j<rangeParts.length;j++){const rangePart=rangeParts[j];if(-1!=rangePart.indexOf("-")){const[start,end]=rangePart.split("-").map(x=>parseInt(x,10));for(let page=start;page<=end;page++)sizes[page]=aspect}else{sizes[parseInt(rangePart,10)]=aspect}}}return sizes}(pageSpec),access:doc=>doc.access,privateAccess:access=>"private"==access,publicAccess:access=>"public"==access,organizationAccess:access=>"organization"==access,editAccess:doc=>null!=doc.edit_access&&doc.edit_access,status:doc=>doc.status,success:status=>"success"==status,readable:status=>"readable"==status,pending:status=>"pending"==status,deleted:status=>"deleted"==status,error:status=>"error"==status,nofile:status=>"nofile"==status,processing:(pending,readable)=>pending||readable,viewable:(success,readable,editAccess)=>success||readable&&editAccess,nonPending:pending=>!pending,rawRemaining:doc=>doc.remaining,hasRemaining:rawRemaining=>null!=rawRemaining,imagesRemaining:(rawRemaining,hasRemaining)=>hasRemaining?rawRemaining.images:null,textsRemaining:(rawRemaining,hasRemaining)=>hasRemaining?rawRemaining.texts:null,imagesProcessed(pageCount,imagesRemaining){return null==imagesRemaining||(this.lastImagesProcessed=0==pageCount?0:pageCount-imagesRemaining),this.lastImagesProcessed},textsProcessed(pageCount,textsRemaining){return null==textsRemaining||(this.lastTextsProcessed=0==pageCount?0:pageCount-textsRemaining),this.lastTextsProcessed},mightHaveThumbnail:(success,imagesProcessed)=>success||imagesProcessed>=1,imageProgress:(hasRemaining,imagesProcessed,pageCount)=>hasRemaining?0==pageCount?0:imagesProcessed/pageCount:null,textProgress:(hasRemaining,textsProcessed,pageCount)=>hasRemaining?0==pageCount?0:textsProcessed/pageCount:null,processingProgress:(hasRemaining,imageProgress,textProgress)=>hasRemaining?(imageProgress+textProgress)/2:null,realProgress(processingProgress){return null==processingProgress?this.lastProgress:(this.lastProgress=processingProgress,processingProgress)},projectIds:doc=>null==doc.projects?[]:doc.projects,notes:doc=>null==doc.notes?[]:doc.notes.map(note=>new structure_note.a(note)),sections:doc=>null==doc.sections?[]:doc.sections.map(section=>new section_Section(section)),rawData:doc=>doc.data,dataPoints(rawData){const results=[];for(const key in rawData)if(rawData.hasOwnProperty(key)){const values=uniquify(rawData[key],x=>x);for(let i=0;i<values.length;i++)results.push({key:key,value:values[i]})}return results.sort((a,b)=>{const aKey="_tag"==a.key?a.value:a.key,bKey="_tag"==b.key?b.value:b.key,aValue=a.value,bValue=b.value,keyCompare=aKey.localeCompare(bKey);return 0!=keyCompare?keyCompare:aValue.localeCompare(bValue)}),results},rawHighlights:doc=>doc.highlights,highlights:(rawHighlights,highlightStart,highlightEnd)=>null==rawHighlights?null:transformHighlights(rawHighlights,highlightStart,highlightEnd),userOrgString:(individualOrg,userName,organizationName)=>individualOrg?userName:`${userName} (${organizationName})`,pageCountString:pageCount=>0==pageCount?"":function(value,str,allowZero=!1){return allowZero||0!=value?`${value} ${simplePlural(value,str)}`:""}(pageCount,"page",!0),createdAtString:createdAt=>createdAt.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"}),summary:(pageCountString,userOrgString,createdAtString)=>[pageCountString,userOrgString,createdAtString].filter(x=>x.length>0).join(" - ")}})}}function transformPassage(passage,highlightStart,highlightEnd){const chunks=[],advance=numChars=>{passage=passage.substr(numChars)},pushRaw=numChars=>{null==numChars&&(numChars=passage.length),0!=numChars&&(chunks.push({text:passage.substr(0,numChars),type:"normal"}),advance(numChars))};for(;passage.length>0;){let foundHighlight=!1,idxStart=passage.indexOf(highlightStart);if(-1!=idxStart){let idxEnd=passage.indexOf(highlightEnd,idxStart+highlightStart.length);-1!=idxEnd&&(pushRaw(idxStart),advance(highlightStart.length),0!=(numChars=idxEnd-idxStart-highlightStart.length)&&(chunks.push({text:passage.substr(0,numChars),type:"highlight"}),advance(numChars)),advance(highlightEnd.length),foundHighlight=!0)}if(!foundHighlight)break}var numChars;return pushRaw(),chunks}function transformHighlights(rawHighlights,highlightStart,highlightEnd,returnDict=!1){const highlights=returnDict?{}:[],pages=[];for(const pageKey in rawHighlights)if(rawHighlights.hasOwnProperty(pageKey)){const match=pageKey.match(PAGE_NO_RE);if(null==match)continue;const page=parseInt(match[1])-1,highlight={page:page,passages:[]},passages=rawHighlights[pageKey];for(let i=0;i<passages.length;i++){const passage=passages[i];highlight.passages.push(transformPassage(passage,highlightStart,highlightEnd))}returnDict?(null==highlights[page]&&pages.push({page:page,count:highlight.passages.length}),highlights[page]=highlight.passages):highlights.push(highlight)}return returnDict?(pages.sort((a,b)=>a.page-b.page),{highlights:highlights,pages:pages}):(highlights.sort((a,b)=>a.page-b.page),highlights)}},function(module,__webpack_exports__,__webpack_require__){"use strict";function timeout(ms){return new Promise(resolve=>setTimeout(resolve,ms))}__webpack_require__.d(__webpack_exports__,"a",(function(){return timeout}))},function(module,exports,__webpack_require__){module.exports=function(){"use strict";var hasOwnProperty=Object.hasOwnProperty,setPrototypeOf=Object.setPrototypeOf,isFrozen=Object.isFrozen,objectKeys=Object.keys,freeze=Object.freeze,seal=Object.seal,_ref="undefined"!=typeof Reflect&&Reflect,apply=_ref.apply,construct=_ref.construct;apply||(apply=function(fun,thisValue,args){return fun.apply(thisValue,args)}),freeze||(freeze=function(x){return x}),seal||(seal=function(x){return x}),construct||(construct=function(Func,args){return new(Function.prototype.bind.apply(Func,[null].concat(function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(args))))});var arrayForEach=unapply(Array.prototype.forEach),arrayIndexOf=unapply(Array.prototype.indexOf),arrayJoin=unapply(Array.prototype.join),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),arraySlice=unapply(Array.prototype.slice),stringToLowerCase=unapply(String.prototype.toLowerCase),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),regExpTest=unapply(RegExp.prototype.test),regExpCreate=unconstruct(RegExp),typeErrorCreate=unconstruct(TypeError);function unapply(func){return function(thisArg){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];return apply(func,thisArg,args)}}function unconstruct(func){return function(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return construct(func,args)}}function addToSet(set,array){setPrototypeOf&&setPrototypeOf(set,null);for(var l=array.length;l--;){var element=array[l];if("string"==typeof element){var lcElement=stringToLowerCase(element);lcElement!==element&&(isFrozen(array)||(array[l]=lcElement),element=lcElement)}set[element]=!0}return set}function clone(object){var newObject={},property=void 0;for(property in object)apply(hasOwnProperty,object,[property])&&(newObject[property]=object[property]);return newObject}var html=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mathMl=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),text=freeze(["#text"]),html$1=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),svg$1=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl$1=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\s\S]*|[\s\S]*\}\}/gm),ERB_EXPR=seal(/<%[\s\S]*|[\s\S]*%>/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};function _toConsumableArray$1(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var getGlobal=function(){return"undefined"==typeof window?null:window},_createTrustedTypesPolicy=function(trustedTypes,document){if("object"!==(void 0===trustedTypes?"undefined":_typeof(trustedTypes))||"function"!=typeof trustedTypes.createPolicy)return null;var suffix=null;document.currentScript&&document.currentScript.hasAttribute("data-tt-policy-suffix")&&(suffix=document.currentScript.getAttribute("data-tt-policy-suffix"));var policyName="dompurify"+(suffix?"#"+suffix:"");try{return trustedTypes.createPolicy(policyName,{createHTML:function(html$$1){return html$$1}})}catch(_){return console.warn("TrustedTypes policy "+policyName+" could not be created."),null}};return function createDOMPurify(){var window=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getGlobal(),DOMPurify=function(root){return createDOMPurify(root)};if(DOMPurify.version="2.0.11",DOMPurify.removed=[],!window||!window.document||9!==window.document.nodeType)return DOMPurify.isSupported=!1,DOMPurify;var originalDocument=window.document,removeTitle=!1,document=window.document,DocumentFragment=window.DocumentFragment,HTMLTemplateElement=window.HTMLTemplateElement,Node=window.Node,NodeFilter=window.NodeFilter,_window$NamedNodeMap=window.NamedNodeMap,NamedNodeMap=void 0===_window$NamedNodeMap?window.NamedNodeMap||window.MozNamedAttrMap:_window$NamedNodeMap,Text=window.Text,Comment=window.Comment,DOMParser=window.DOMParser,trustedTypes=window.trustedTypes;if("function"==typeof HTMLTemplateElement){var template=document.createElement("template");template.content&&template.content.ownerDocument&&(document=template.content.ownerDocument)}var trustedTypesPolicy=_createTrustedTypesPolicy(trustedTypes,originalDocument),emptyHTML=trustedTypesPolicy?trustedTypesPolicy.createHTML(""):"",_document=document,implementation=_document.implementation,createNodeIterator=_document.createNodeIterator,getElementsByTagName=_document.getElementsByTagName,createDocumentFragment=_document.createDocumentFragment,importNode=originalDocument.importNode,hooks={};DOMPurify.isSupported=implementation&&void 0!==implementation.createHTMLDocument&&9!==document.documentMode;var MUSTACHE_EXPR$$1=MUSTACHE_EXPR,ERB_EXPR$$1=ERB_EXPR,DATA_ATTR$$1=DATA_ATTR,ARIA_ATTR$$1=ARIA_ATTR,IS_SCRIPT_OR_DATA$$1=IS_SCRIPT_OR_DATA,ATTR_WHITESPACE$$1=ATTR_WHITESPACE,IS_ALLOWED_URI$$1=IS_ALLOWED_URI,ALLOWED_TAGS=null,DEFAULT_ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray$1(html),_toConsumableArray$1(svg),_toConsumableArray$1(svgFilters),_toConsumableArray$1(mathMl),_toConsumableArray$1(text))),ALLOWED_ATTR=null,DEFAULT_ALLOWED_ATTR=addToSet({},[].concat(_toConsumableArray$1(html$1),_toConsumableArray$1(svg$1),_toConsumableArray$1(mathMl$1),_toConsumableArray$1(xml))),FORBID_TAGS=null,FORBID_ATTR=null,ALLOW_ARIA_ATTR=!0,ALLOW_DATA_ATTR=!0,ALLOW_UNKNOWN_PROTOCOLS=!1,SAFE_FOR_JQUERY=!1,SAFE_FOR_TEMPLATES=!1,WHOLE_DOCUMENT=!1,SET_CONFIG=!1,FORCE_BODY=!1,RETURN_DOM=!1,RETURN_DOM_FRAGMENT=!1,RETURN_DOM_IMPORT=!1,RETURN_TRUSTED_TYPE=!1,SANITIZE_DOM=!0,KEEP_CONTENT=!0,IN_PLACE=!1,USE_PROFILES={},FORBID_CONTENTS=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),DATA_URI_TAGS=null,DEFAULT_DATA_URI_TAGS=addToSet({},["audio","video","img","source","image","track"]),URI_SAFE_ATTRIBUTES=null,DEFAULT_URI_SAFE_ATTRIBUTES=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),CONFIG=null,formElement=document.createElement("form"),_parseConfig=function(cfg){CONFIG&&CONFIG===cfg||(cfg&&"object"===(void 0===cfg?"undefined":_typeof(cfg))||(cfg={}),ALLOWED_TAGS="ALLOWED_TAGS"in cfg?addToSet({},cfg.ALLOWED_TAGS):DEFAULT_ALLOWED_TAGS,ALLOWED_ATTR="ALLOWED_ATTR"in cfg?addToSet({},cfg.ALLOWED_ATTR):DEFAULT_ALLOWED_ATTR,URI_SAFE_ATTRIBUTES="ADD_URI_SAFE_ATTR"in cfg?addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES),cfg.ADD_URI_SAFE_ATTR):DEFAULT_URI_SAFE_ATTRIBUTES,DATA_URI_TAGS="ADD_DATA_URI_TAGS"in cfg?addToSet(clone(DEFAULT_DATA_URI_TAGS),cfg.ADD_DATA_URI_TAGS):DEFAULT_DATA_URI_TAGS,FORBID_TAGS="FORBID_TAGS"in cfg?addToSet({},cfg.FORBID_TAGS):{},FORBID_ATTR="FORBID_ATTR"in cfg?addToSet({},cfg.FORBID_ATTR):{},USE_PROFILES="USE_PROFILES"in cfg&&cfg.USE_PROFILES,ALLOW_ARIA_ATTR=!1!==cfg.ALLOW_ARIA_ATTR,ALLOW_DATA_ATTR=!1!==cfg.ALLOW_DATA_ATTR,ALLOW_UNKNOWN_PROTOCOLS=cfg.ALLOW_UNKNOWN_PROTOCOLS||!1,SAFE_FOR_JQUERY=cfg.SAFE_FOR_JQUERY||!1,SAFE_FOR_TEMPLATES=cfg.SAFE_FOR_TEMPLATES||!1,WHOLE_DOCUMENT=cfg.WHOLE_DOCUMENT||!1,RETURN_DOM=cfg.RETURN_DOM||!1,RETURN_DOM_FRAGMENT=cfg.RETURN_DOM_FRAGMENT||!1,RETURN_DOM_IMPORT=cfg.RETURN_DOM_IMPORT||!1,RETURN_TRUSTED_TYPE=cfg.RETURN_TRUSTED_TYPE||!1,FORCE_BODY=cfg.FORCE_BODY||!1,SANITIZE_DOM=!1!==cfg.SANITIZE_DOM,KEEP_CONTENT=!1!==cfg.KEEP_CONTENT,IN_PLACE=cfg.IN_PLACE||!1,IS_ALLOWED_URI$$1=cfg.ALLOWED_URI_REGEXP||IS_ALLOWED_URI$$1,SAFE_FOR_TEMPLATES&&(ALLOW_DATA_ATTR=!1),RETURN_DOM_FRAGMENT&&(RETURN_DOM=!0),USE_PROFILES&&(ALLOWED_TAGS=addToSet({},[].concat(_toConsumableArray$1(text))),ALLOWED_ATTR=[],!0===USE_PROFILES.html&&(addToSet(ALLOWED_TAGS,html),addToSet(ALLOWED_ATTR,html$1)),!0===USE_PROFILES.svg&&(addToSet(ALLOWED_TAGS,svg),addToSet(ALLOWED_ATTR,svg$1),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.svgFilters&&(addToSet(ALLOWED_TAGS,svgFilters),addToSet(ALLOWED_ATTR,svg$1),addToSet(ALLOWED_ATTR,xml)),!0===USE_PROFILES.mathMl&&(addToSet(ALLOWED_TAGS,mathMl),addToSet(ALLOWED_ATTR,mathMl$1),addToSet(ALLOWED_ATTR,xml))),cfg.ADD_TAGS&&(ALLOWED_TAGS===DEFAULT_ALLOWED_TAGS&&(ALLOWED_TAGS=clone(ALLOWED_TAGS)),addToSet(ALLOWED_TAGS,cfg.ADD_TAGS)),cfg.ADD_ATTR&&(ALLOWED_ATTR===DEFAULT_ALLOWED_ATTR&&(ALLOWED_ATTR=clone(ALLOWED_ATTR)),addToSet(ALLOWED_ATTR,cfg.ADD_ATTR)),cfg.ADD_URI_SAFE_ATTR&&addToSet(URI_SAFE_ATTRIBUTES,cfg.ADD_URI_SAFE_ATTR),KEEP_CONTENT&&(ALLOWED_TAGS["#text"]=!0),WHOLE_DOCUMENT&&addToSet(ALLOWED_TAGS,["html","head","body"]),ALLOWED_TAGS.table&&(addToSet(ALLOWED_TAGS,["tbody"]),delete FORBID_TAGS.tbody),freeze&&freeze(cfg),CONFIG=cfg)},_forceRemove=function(node){arrayPush(DOMPurify.removed,{element:node});try{node.parentNode.removeChild(node)}catch(_){node.outerHTML=emptyHTML}},_removeAttribute=function(name,node){try{arrayPush(DOMPurify.removed,{attribute:node.getAttributeNode(name),from:node})}catch(_){arrayPush(DOMPurify.removed,{attribute:null,from:node})}node.removeAttribute(name)},_initDocument=function(dirty){var doc=void 0,leadingWhitespace=void 0;if(FORCE_BODY)dirty="<remove></remove>"+dirty;else{var matches=stringMatch(dirty,/^[\r\n\t ]+/);leadingWhitespace=matches&&matches[0]}var dirtyPayload=trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;try{doc=(new DOMParser).parseFromString(dirtyPayload,"text/html")}catch(_){}if(removeTitle&&addToSet(FORBID_TAGS,["title"]),!doc||!doc.documentElement){var body=(doc=implementation.createHTMLDocument("")).body;body.parentNode.removeChild(body.parentNode.firstElementChild),body.outerHTML=dirtyPayload}return dirty&&leadingWhitespace&&doc.body.insertBefore(document.createTextNode(leadingWhitespace),doc.body.childNodes[0]||null),getElementsByTagName.call(doc,WHOLE_DOCUMENT?"html":"body")[0]};DOMPurify.isSupported&&function(){try{var doc=_initDocument("<x/><title>&lt;/title&gt;&lt;img&gt;");regExpTest(/<\/title/,doc.querySelector("title").innerHTML)&&(removeTitle=!0)}catch(_){}}();var _createIterator=function(root){return createNodeIterator.call(root.ownerDocument||root,root,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT,(function(){return NodeFilter.FILTER_ACCEPT}),!1)},_isClobbered=function(elm){return!(elm instanceof Text||elm instanceof Comment||"string"==typeof elm.nodeName&&"string"==typeof elm.textContent&&"function"==typeof elm.removeChild&&elm.attributes instanceof NamedNodeMap&&"function"==typeof elm.removeAttribute&&"function"==typeof elm.setAttribute&&"string"==typeof elm.namespaceURI)},_isNode=function(object){return"object"===(void 0===Node?"undefined":_typeof(Node))?object instanceof Node:object&&"object"===(void 0===object?"undefined":_typeof(object))&&"number"==typeof object.nodeType&&"string"==typeof object.nodeName},_executeHook=function(entryPoint,currentNode,data){hooks[entryPoint]&&arrayForEach(hooks[entryPoint],(function(hook){hook.call(DOMPurify,currentNode,data,CONFIG)}))},_sanitizeElements=function(currentNode){var content=void 0;if(_executeHook("beforeSanitizeElements",currentNode,null),_isClobbered(currentNode))return _forceRemove(currentNode),!0;var tagName=stringToLowerCase(currentNode.nodeName);if(_executeHook("uponSanitizeElement",currentNode,{tagName:tagName,allowedTags:ALLOWED_TAGS}),("svg"===tagName||"math"===tagName)&&0!==currentNode.querySelectorAll("p, br").length)return _forceRemove(currentNode),!0;if(!ALLOWED_TAGS[tagName]||FORBID_TAGS[tagName]){if(KEEP_CONTENT&&!FORBID_CONTENTS[tagName]&&"function"==typeof currentNode.insertAdjacentHTML)try{var htmlToInsert=currentNode.innerHTML;currentNode.insertAdjacentHTML("AfterEnd",trustedTypesPolicy?trustedTypesPolicy.createHTML(htmlToInsert):htmlToInsert)}catch(_){}return _forceRemove(currentNode),!0}return"noscript"===tagName&&regExpTest(/<\/noscript/i,currentNode.innerHTML)||"noembed"===tagName&&regExpTest(/<\/noembed/i,currentNode.innerHTML)?(_forceRemove(currentNode),!0):(!SAFE_FOR_JQUERY||currentNode.firstElementChild||currentNode.content&&currentNode.content.firstElementChild||!regExpTest(/</g,currentNode.textContent)||(arrayPush(DOMPurify.removed,{element:currentNode.cloneNode()}),currentNode.innerHTML?currentNode.innerHTML=stringReplace(currentNode.innerHTML,/</g,"&lt;"):currentNode.innerHTML=stringReplace(currentNode.textContent,/</g,"&lt;")),SAFE_FOR_TEMPLATES&&3===currentNode.nodeType&&(content=currentNode.textContent,content=stringReplace(content,MUSTACHE_EXPR$$1," "),content=stringReplace(content,ERB_EXPR$$1," "),currentNode.textContent!==content&&(arrayPush(DOMPurify.removed,{element:currentNode.cloneNode()}),currentNode.textContent=content)),_executeHook("afterSanitizeElements",currentNode,null),!1)},_isValidAttribute=function(lcTag,lcName,value){if(SANITIZE_DOM&&("id"===lcName||"name"===lcName)&&(value in document||value in formElement))return!1;if(ALLOW_DATA_ATTR&&regExpTest(DATA_ATTR$$1,lcName));else if(ALLOW_ARIA_ATTR&&regExpTest(ARIA_ATTR$$1,lcName));else{if(!ALLOWED_ATTR[lcName]||FORBID_ATTR[lcName])return!1;if(URI_SAFE_ATTRIBUTES[lcName]);else if(regExpTest(IS_ALLOWED_URI$$1,stringReplace(value,ATTR_WHITESPACE$$1,"")));else if("src"!==lcName&&"xlink:href"!==lcName&&"href"!==lcName||"script"===lcTag||0!==stringIndexOf(value,"data:")||!DATA_URI_TAGS[lcTag])if(ALLOW_UNKNOWN_PROTOCOLS&&!regExpTest(IS_SCRIPT_OR_DATA$$1,stringReplace(value,ATTR_WHITESPACE$$1,"")));else if(value)return!1}return!0},_sanitizeAttributes=function(currentNode){var attr=void 0,value=void 0,lcName=void 0,idAttr=void 0,l=void 0;_executeHook("beforeSanitizeAttributes",currentNode,null);var attributes=currentNode.attributes;if(attributes){var hookEvent={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ALLOWED_ATTR};for(l=attributes.length;l--;){var _attr=attr=attributes[l],name=_attr.name,namespaceURI=_attr.namespaceURI;if(value=stringTrim(attr.value),lcName=stringToLowerCase(name),hookEvent.attrName=lcName,hookEvent.attrValue=value,hookEvent.keepAttr=!0,hookEvent.forceKeepAttr=void 0,_executeHook("uponSanitizeAttribute",currentNode,hookEvent),value=hookEvent.attrValue,!hookEvent.forceKeepAttr){if("name"===lcName&&"IMG"===currentNode.nodeName&&attributes.id)idAttr=attributes.id,attributes=arraySlice(attributes,[]),_removeAttribute("id",currentNode),_removeAttribute(name,currentNode),arrayIndexOf(attributes,idAttr)>l&&currentNode.setAttribute("id",idAttr.value);else{if("INPUT"===currentNode.nodeName&&"type"===lcName&&"file"===value&&hookEvent.keepAttr&&(ALLOWED_ATTR[lcName]||!FORBID_ATTR[lcName]))continue;"id"===name&&currentNode.setAttribute(name,""),_removeAttribute(name,currentNode)}if(hookEvent.keepAttr)if(SAFE_FOR_JQUERY&&regExpTest(/\/>/i,value))_removeAttribute(name,currentNode);else if(regExpTest(/svg|math/i,currentNode.namespaceURI)&&regExpTest(regExpCreate("</("+arrayJoin(objectKeys(FORBID_CONTENTS),"|")+")","i"),value))_removeAttribute(name,currentNode);else{SAFE_FOR_TEMPLATES&&(value=stringReplace(value,MUSTACHE_EXPR$$1," "),value=stringReplace(value,ERB_EXPR$$1," "));var lcTag=currentNode.nodeName.toLowerCase();if(_isValidAttribute(lcTag,lcName,value))try{namespaceURI?currentNode.setAttributeNS(namespaceURI,name,value):currentNode.setAttribute(name,value),arrayPop(DOMPurify.removed)}catch(_){}}}}_executeHook("afterSanitizeAttributes",currentNode,null)}},_sanitizeShadowDOM=function _sanitizeShadowDOM(fragment){var shadowNode=void 0,shadowIterator=_createIterator(fragment);for(_executeHook("beforeSanitizeShadowDOM",fragment,null);shadowNode=shadowIterator.nextNode();)_executeHook("uponSanitizeShadowNode",shadowNode,null),_sanitizeElements(shadowNode)||(shadowNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(shadowNode.content),_sanitizeAttributes(shadowNode));_executeHook("afterSanitizeShadowDOM",fragment,null)};return DOMPurify.sanitize=function(dirty,cfg){var body=void 0,importedNode=void 0,currentNode=void 0,oldNode=void 0,returnNode=void 0;if(dirty||(dirty="\x3c!--\x3e"),"string"!=typeof dirty&&!_isNode(dirty)){if("function"!=typeof dirty.toString)throw typeErrorCreate("toString is not a function");if("string"!=typeof(dirty=dirty.toString()))throw typeErrorCreate("dirty is not a string, aborting")}if(!DOMPurify.isSupported){if("object"===_typeof(window.toStaticHTML)||"function"==typeof window.toStaticHTML){if("string"==typeof dirty)return window.toStaticHTML(dirty);if(_isNode(dirty))return window.toStaticHTML(dirty.outerHTML)}return dirty}if(SET_CONFIG||_parseConfig(cfg),DOMPurify.removed=[],"string"==typeof dirty&&(IN_PLACE=!1),IN_PLACE);else if(dirty instanceof Node)1===(importedNode=(body=_initDocument("\x3c!--\x3e")).ownerDocument.importNode(dirty,!0)).nodeType&&"BODY"===importedNode.nodeName||"HTML"===importedNode.nodeName?body=importedNode:body.appendChild(importedNode);else{if(!RETURN_DOM&&!SAFE_FOR_TEMPLATES&&!WHOLE_DOCUMENT&&RETURN_TRUSTED_TYPE&&-1===dirty.indexOf("<"))return trustedTypesPolicy?trustedTypesPolicy.createHTML(dirty):dirty;if(!(body=_initDocument(dirty)))return RETURN_DOM?null:emptyHTML}body&&FORCE_BODY&&_forceRemove(body.firstChild);for(var nodeIterator=_createIterator(IN_PLACE?dirty:body);currentNode=nodeIterator.nextNode();)3===currentNode.nodeType&&currentNode===oldNode||_sanitizeElements(currentNode)||(currentNode.content instanceof DocumentFragment&&_sanitizeShadowDOM(currentNode.content),_sanitizeAttributes(currentNode),oldNode=currentNode);if(oldNode=null,IN_PLACE)return dirty;if(RETURN_DOM){if(RETURN_DOM_FRAGMENT)for(returnNode=createDocumentFragment.call(body.ownerDocument);body.firstChild;)returnNode.appendChild(body.firstChild);else returnNode=body;return RETURN_DOM_IMPORT&&(returnNode=importNode.call(originalDocument,returnNode,!0)),returnNode}var serializedHTML=WHOLE_DOCUMENT?body.outerHTML:body.innerHTML;return SAFE_FOR_TEMPLATES&&(serializedHTML=stringReplace(serializedHTML,MUSTACHE_EXPR$$1," "),serializedHTML=stringReplace(serializedHTML,ERB_EXPR$$1," ")),trustedTypesPolicy&&RETURN_TRUSTED_TYPE?trustedTypesPolicy.createHTML(serializedHTML):serializedHTML},DOMPurify.setConfig=function(cfg){_parseConfig(cfg),SET_CONFIG=!0},DOMPurify.clearConfig=function(){CONFIG=null,SET_CONFIG=!1},DOMPurify.isValidAttribute=function(tag,attr,value){CONFIG||_parseConfig({});var lcTag=stringToLowerCase(tag),lcName=stringToLowerCase(attr);return _isValidAttribute(lcTag,lcName,value)},DOMPurify.addHook=function(entryPoint,hookFunction){"function"==typeof hookFunction&&(hooks[entryPoint]=hooks[entryPoint]||[],arrayPush(hooks[entryPoint],hookFunction))},DOMPurify.removeHook=function(entryPoint){hooks[entryPoint]&&arrayPop(hooks[entryPoint])},DOMPurify.removeHooks=function(entryPoint){hooks[entryPoint]&&(hooks[entryPoint]=[])},DOMPurify.removeAllHooks=function(){hooks={}},DOMPurify}()}()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return Results}));var svue__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(6),_util_url__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3);const pageRe=/([&\?]page=)([0-9]+)/;class Results extends svue__WEBPACK_IMPORTED_MODULE_0__.a{constructor(url,rawResults,structure={}){super({data(){const data=null==structure.data?{}:structure.data();return data.rawResults=rawResults,data.url=url,data},computed:{...null==structure.computed?{}:structure.computed,count:rawResults=>rawResults.count,results:rawResults=>rawResults.results,length:results=>results.length,page(hasNext,hasPrev,nextUrl,prevUrl){if(!hasNext&&!hasPrev)return 0;if(hasNext){const match=nextUrl.match(pageRe);if(null==match)throw new Error("This should not happen");return parseInt(match[2])-1-1}if(hasPrev){const match=prevUrl.match(pageRe);if(null==match)return 1;return parseInt(match[2])-1+1}},numPages:(count,length,page,hasNext)=>hasNext?Math.ceil(count/length):page+1,perPage:(count,length,page,numPages)=>1==numPages?count:page<numPages-1?length:(count-length)/(numPages-1),nextUrl:rawResults=>rawResults.next,prevUrl:rawResults=>rawResults.previous,hasNext:nextUrl=>null!=nextUrl,hasPrev:prevUrl=>null!=prevUrl,nextPage:(hasNext,page)=>hasNext?page+1:null,prevPage:(hasPrev,page)=>hasPrev?page-1:null,onlyPage:(hasPrev,hasNext)=>!hasPrev&&!hasNext,start:(page,perPage)=>page*perPage,end:(page,perPage,length)=>page*perPage+length}})}getUrl(page){return null==this.url.match(pageRe)?Object(_util_url__WEBPACK_IMPORTED_MODULE_1__.a)(this.url,{page:page+1}):this.url.replace(pageRe,"$1"+(page+1))}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return batchDelay}));var _util_timeout__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11);async function batchDelay(collection,batchSize,delay,fn){let results=[];for(let i=0;i<collection.length;i+=batchSize){const subCollection=collection.slice(i,i+batchSize);results=results.concat(await fn(subCollection)),await Object(_util_timeout__WEBPACK_IMPORTED_MODULE_0__.a)(delay)}return results}},function(module,exports,__webpack_require__){"use strict";module.exports=function(fn,thisArg){return function(){for(var args=new Array(arguments.length),i=0;i<args.length;i++)args[i]=arguments[i];return fn.apply(thisArg,args)}}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);function encode(val){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}module.exports=function(url,params,paramsSerializer){if(!params)return url;var serializedParams;if(paramsSerializer)serializedParams=paramsSerializer(params);else if(utils.isURLSearchParams(params))serializedParams=params.toString();else{var parts=[];utils.forEach(params,(function(val,key){null!=val&&(utils.isArray(val)?key+="[]":val=[val],utils.forEach(val,(function(v){utils.isDate(v)?v=v.toISOString():utils.isObject(v)&&(v=JSON.stringify(v)),parts.push(encode(key)+"="+encode(v))})))})),serializedParams=parts.join("&")}if(serializedParams){var hashmarkIndex=url.indexOf("#");-1!==hashmarkIndex&&(url=url.slice(0,hashmarkIndex)),url+=(-1===url.indexOf("?")?"?":"&")+serializedParams}return url}},function(module,exports,__webpack_require__){"use strict";module.exports=function(value){return!(!value||!value.__CANCEL__)}},function(module,exports,__webpack_require__){"use strict";(function(process){var utils=__webpack_require__(4),normalizeHeaderName=__webpack_require__(31),DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(headers,value){!utils.isUndefined(headers)&&utils.isUndefined(headers["Content-Type"])&&(headers["Content-Type"]=value)}var adapter,defaults={adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==process&&"[object process]"===Object.prototype.toString.call(process))&&(adapter=__webpack_require__(20)),adapter),transformRequest:[function(data,headers){return normalizeHeaderName(headers,"Accept"),normalizeHeaderName(headers,"Content-Type"),utils.isFormData(data)||utils.isArrayBuffer(data)||utils.isBuffer(data)||utils.isStream(data)||utils.isFile(data)||utils.isBlob(data)?data:utils.isArrayBufferView(data)?data.buffer:utils.isURLSearchParams(data)?(setContentTypeIfUnset(headers,"application/x-www-form-urlencoded;charset=utf-8"),data.toString()):utils.isObject(data)?(setContentTypeIfUnset(headers,"application/json;charset=utf-8"),JSON.stringify(data)):data}],transformResponse:[function(data){if("string"==typeof data)try{data=JSON.parse(data)}catch(e){}return data}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(status){return status>=200&&status<300}};defaults.headers={common:{Accept:"application/json, text/plain, */*"}},utils.forEach(["delete","get","head"],(function(method){defaults.headers[method]={}})),utils.forEach(["post","put","patch"],(function(method){defaults.headers[method]=utils.merge(DEFAULT_CONTENT_TYPE)})),module.exports=defaults}).call(this,__webpack_require__(19))},function(module,exports){var cachedSetTimeout,cachedClearTimeout,process=module.exports={};function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(fun){if(cachedSetTimeout===setTimeout)return setTimeout(fun,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(fun,0);try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var currentQueue,queue=[],draining=!1,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var timeout=runTimeout(cleanUpNextTick);draining=!0;for(var len=queue.length;len;){for(currentQueue=queue,queue=[];++queueIndex<len;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,len=queue.length}currentQueue=null,draining=!1,function(marker){if(cachedClearTimeout===clearTimeout)return clearTimeout(marker);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(marker);try{cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}(timeout)}}function Item(fun,array){this.fun=fun,this.array=array}function noop(){}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)args[i-1]=arguments[i];queue.push(new Item(fun,args)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(name){return[]},process.binding=function(name){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(dir){throw new Error("process.chdir is not supported")},process.umask=function(){return 0}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4),settle=__webpack_require__(32),buildURL=__webpack_require__(16),buildFullPath=__webpack_require__(34),parseHeaders=__webpack_require__(37),isURLSameOrigin=__webpack_require__(38),createError=__webpack_require__(21);module.exports=function(config){return new Promise((function(resolve,reject){var requestData=config.data,requestHeaders=config.headers;utils.isFormData(requestData)&&delete requestHeaders["Content-Type"];var request=new XMLHttpRequest;if(config.auth){var username=config.auth.username||"",password=config.auth.password||"";requestHeaders.Authorization="Basic "+btoa(username+":"+password)}var fullPath=buildFullPath(config.baseURL,config.url);if(request.open(config.method.toUpperCase(),buildURL(fullPath,config.params,config.paramsSerializer),!0),request.timeout=config.timeout,request.onreadystatechange=function(){if(request&&4===request.readyState&&(0!==request.status||request.responseURL&&0===request.responseURL.indexOf("file:"))){var responseHeaders="getAllResponseHeaders"in request?parseHeaders(request.getAllResponseHeaders()):null,response={data:config.responseType&&"text"!==config.responseType?request.response:request.responseText,status:request.status,statusText:request.statusText,headers:responseHeaders,config:config,request:request};settle(resolve,reject,response),request=null}},request.onabort=function(){request&&(reject(createError("Request aborted",config,"ECONNABORTED",request)),request=null)},request.onerror=function(){reject(createError("Network Error",config,null,request)),request=null},request.ontimeout=function(){var timeoutErrorMessage="timeout of "+config.timeout+"ms exceeded";config.timeoutErrorMessage&&(timeoutErrorMessage=config.timeoutErrorMessage),reject(createError(timeoutErrorMessage,config,"ECONNABORTED",request)),request=null},utils.isStandardBrowserEnv()){var cookies=__webpack_require__(39),xsrfValue=(config.withCredentials||isURLSameOrigin(fullPath))&&config.xsrfCookieName?cookies.read(config.xsrfCookieName):void 0;xsrfValue&&(requestHeaders[config.xsrfHeaderName]=xsrfValue)}if("setRequestHeader"in request&&utils.forEach(requestHeaders,(function(val,key){void 0===requestData&&"content-type"===key.toLowerCase()?delete requestHeaders[key]:request.setRequestHeader(key,val)})),utils.isUndefined(config.withCredentials)||(request.withCredentials=!!config.withCredentials),config.responseType)try{request.responseType=config.responseType}catch(e){if("json"!==config.responseType)throw e}"function"==typeof config.onDownloadProgress&&request.addEventListener("progress",config.onDownloadProgress),"function"==typeof config.onUploadProgress&&request.upload&&request.upload.addEventListener("progress",config.onUploadProgress),config.cancelToken&&config.cancelToken.promise.then((function(cancel){request&&(request.abort(),reject(cancel),request=null)})),void 0===requestData&&(requestData=null),request.send(requestData)}))}},function(module,exports,__webpack_require__){"use strict";var enhanceError=__webpack_require__(33);module.exports=function(message,config,code,request,response){var error=new Error(message);return enhanceError(error,config,code,request,response)}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);module.exports=function(config1,config2){config2=config2||{};var config={},valueFromConfig2Keys=["url","method","params","data"],mergeDeepPropertiesKeys=["headers","auth","proxy"],defaultToConfig2Keys=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];utils.forEach(valueFromConfig2Keys,(function(prop){void 0!==config2[prop]&&(config[prop]=config2[prop])})),utils.forEach(mergeDeepPropertiesKeys,(function(prop){utils.isObject(config2[prop])?config[prop]=utils.deepMerge(config1[prop],config2[prop]):void 0!==config2[prop]?config[prop]=config2[prop]:utils.isObject(config1[prop])?config[prop]=utils.deepMerge(config1[prop]):void 0!==config1[prop]&&(config[prop]=config1[prop])})),utils.forEach(defaultToConfig2Keys,(function(prop){void 0!==config2[prop]?config[prop]=config2[prop]:void 0!==config1[prop]&&(config[prop]=config1[prop])}));var axiosKeys=valueFromConfig2Keys.concat(mergeDeepPropertiesKeys).concat(defaultToConfig2Keys),otherKeys=Object.keys(config2).filter((function(key){return-1===axiosKeys.indexOf(key)}));return utils.forEach(otherKeys,(function(prop){void 0!==config2[prop]?config[prop]=config2[prop]:void 0!==config1[prop]&&(config[prop]=config1[prop])})),config}},function(module,exports,__webpack_require__){"use strict";function Cancel(message){this.message=message}Cancel.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},Cancel.prototype.__CANCEL__=!0,module.exports=Cancel},function(module,__webpack_exports__,__webpack_require__){"use strict";(function(process){__webpack_require__.d(__webpack_exports__,"a",(function(){return getDocument}));var _session__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),_base__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1),_util_url__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(11),__webpack_require__(3)),_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5),_structure_document__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__(9),__webpack_require__(13),__webpack_require__(14),__webpack_require__(8),__webpack_require__(10));process.env.POLL_TIMEOUT,parseInt("25"),parseInt("1000");async function getDocument(id,expand=_common__WEBPACK_IMPORTED_MODULE_4__.a){const{data:data}=await _session__WEBPACK_IMPORTED_MODULE_0__.a.get(Object(_base__WEBPACK_IMPORTED_MODULE_1__.a)(Object(_util_url__WEBPACK_IMPORTED_MODULE_3__.a)(`documents/${id}/`,{expand:expand})));return new _structure_document__WEBPACK_IMPORTED_MODULE_9__.a(data)}}).call(this,__webpack_require__(19))},function(module,exports,__webpack_require__){module.exports=__webpack_require__(42)},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4),bind=__webpack_require__(15),Axios=__webpack_require__(27),mergeConfig=__webpack_require__(22);function createInstance(defaultConfig){var context=new Axios(defaultConfig),instance=bind(Axios.prototype.request,context);return utils.extend(instance,Axios.prototype,context),utils.extend(instance,context),instance}var axios=createInstance(__webpack_require__(18));axios.Axios=Axios,axios.create=function(instanceConfig){return createInstance(mergeConfig(axios.defaults,instanceConfig))},axios.Cancel=__webpack_require__(23),axios.CancelToken=__webpack_require__(40),axios.isCancel=__webpack_require__(17),axios.all=function(promises){return Promise.all(promises)},axios.spread=__webpack_require__(41),module.exports=axios,module.exports.default=axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4),buildURL=__webpack_require__(16),InterceptorManager=__webpack_require__(28),dispatchRequest=__webpack_require__(29),mergeConfig=__webpack_require__(22);function Axios(instanceConfig){this.defaults=instanceConfig,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios.prototype.request=function(config){"string"==typeof config?(config=arguments[1]||{}).url=arguments[0]:config=config||{},(config=mergeConfig(this.defaults,config)).method?config.method=config.method.toLowerCase():this.defaults.method?config.method=this.defaults.method.toLowerCase():config.method="get";var chain=[dispatchRequest,void 0],promise=Promise.resolve(config);for(this.interceptors.request.forEach((function(interceptor){chain.unshift(interceptor.fulfilled,interceptor.rejected)})),this.interceptors.response.forEach((function(interceptor){chain.push(interceptor.fulfilled,interceptor.rejected)}));chain.length;)promise=promise.then(chain.shift(),chain.shift());return promise},Axios.prototype.getUri=function(config){return config=mergeConfig(this.defaults,config),buildURL(config.url,config.params,config.paramsSerializer).replace(/^\?/,"")},utils.forEach(["delete","get","head","options"],(function(method){Axios.prototype[method]=function(url,config){return this.request(utils.merge(config||{},{method:method,url:url}))}})),utils.forEach(["post","put","patch"],(function(method){Axios.prototype[method]=function(url,data,config){return this.request(utils.merge(config||{},{method:method,url:url,data:data}))}})),module.exports=Axios},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);function InterceptorManager(){this.handlers=[]}InterceptorManager.prototype.use=function(fulfilled,rejected){return this.handlers.push({fulfilled:fulfilled,rejected:rejected}),this.handlers.length-1},InterceptorManager.prototype.eject=function(id){this.handlers[id]&&(this.handlers[id]=null)},InterceptorManager.prototype.forEach=function(fn){utils.forEach(this.handlers,(function(h){null!==h&&fn(h)}))},module.exports=InterceptorManager},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4),transformData=__webpack_require__(30),isCancel=__webpack_require__(17),defaults=__webpack_require__(18);function throwIfCancellationRequested(config){config.cancelToken&&config.cancelToken.throwIfRequested()}module.exports=function(config){return throwIfCancellationRequested(config),config.headers=config.headers||{},config.data=transformData(config.data,config.headers,config.transformRequest),config.headers=utils.merge(config.headers.common||{},config.headers[config.method]||{},config.headers),utils.forEach(["delete","get","head","post","put","patch","common"],(function(method){delete config.headers[method]})),(config.adapter||defaults.adapter)(config).then((function(response){return throwIfCancellationRequested(config),response.data=transformData(response.data,response.headers,config.transformResponse),response}),(function(reason){return isCancel(reason)||(throwIfCancellationRequested(config),reason&&reason.response&&(reason.response.data=transformData(reason.response.data,reason.response.headers,config.transformResponse))),Promise.reject(reason)}))}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);module.exports=function(data,headers,fns){return utils.forEach(fns,(function(fn){data=fn(data,headers)})),data}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);module.exports=function(headers,normalizedName){utils.forEach(headers,(function(value,name){name!==normalizedName&&name.toUpperCase()===normalizedName.toUpperCase()&&(headers[normalizedName]=value,delete headers[name])}))}},function(module,exports,__webpack_require__){"use strict";var createError=__webpack_require__(21);module.exports=function(resolve,reject,response){var validateStatus=response.config.validateStatus;!validateStatus||validateStatus(response.status)?resolve(response):reject(createError("Request failed with status code "+response.status,response.config,null,response.request,response))}},function(module,exports,__webpack_require__){"use strict";module.exports=function(error,config,code,request,response){return error.config=config,code&&(error.code=code),error.request=request,error.response=response,error.isAxiosError=!0,error.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},error}},function(module,exports,__webpack_require__){"use strict";var isAbsoluteURL=__webpack_require__(35),combineURLs=__webpack_require__(36);module.exports=function(baseURL,requestedURL){return baseURL&&!isAbsoluteURL(requestedURL)?combineURLs(baseURL,requestedURL):requestedURL}},function(module,exports,__webpack_require__){"use strict";module.exports=function(url){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(url)}},function(module,exports,__webpack_require__){"use strict";module.exports=function(baseURL,relativeURL){return relativeURL?baseURL.replace(/\/+$/,"")+"/"+relativeURL.replace(/^\/+/,""):baseURL}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4),ignoreDuplicateOf=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];module.exports=function(headers){var key,val,i,parsed={};return headers?(utils.forEach(headers.split("\n"),(function(line){if(i=line.indexOf(":"),key=utils.trim(line.substr(0,i)).toLowerCase(),val=utils.trim(line.substr(i+1)),key){if(parsed[key]&&ignoreDuplicateOf.indexOf(key)>=0)return;parsed[key]="set-cookie"===key?(parsed[key]?parsed[key]:[]).concat([val]):parsed[key]?parsed[key]+", "+val:val}})),parsed):parsed}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);module.exports=utils.isStandardBrowserEnv()?function(){var originURL,msie=/(msie|trident)/i.test(navigator.userAgent),urlParsingNode=document.createElement("a");function resolveURL(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}return originURL=resolveURL(window.location.href),function(requestURL){var parsed=utils.isString(requestURL)?resolveURL(requestURL):requestURL;return parsed.protocol===originURL.protocol&&parsed.host===originURL.host}}():function(){return!0}},function(module,exports,__webpack_require__){"use strict";var utils=__webpack_require__(4);module.exports=utils.isStandardBrowserEnv()?{write:function(name,value,expires,path,domain,secure){var cookie=[];cookie.push(name+"="+encodeURIComponent(value)),utils.isNumber(expires)&&cookie.push("expires="+new Date(expires).toGMTString()),utils.isString(path)&&cookie.push("path="+path),utils.isString(domain)&&cookie.push("domain="+domain),!0===secure&&cookie.push("secure"),document.cookie=cookie.join("; ")},read:function(name){var match=document.cookie.match(new RegExp("(^|;\\s*)("+name+")=([^;]*)"));return match?decodeURIComponent(match[3]):null},remove:function(name){this.write(name,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(module,exports,__webpack_require__){"use strict";var Cancel=__webpack_require__(23);function CancelToken(executor){if("function"!=typeof executor)throw new TypeError("executor must be a function.");var resolvePromise;this.promise=new Promise((function(resolve){resolvePromise=resolve}));var token=this;executor((function(message){token.reason||(token.reason=new Cancel(message),resolvePromise(token.reason))}))}CancelToken.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},CancelToken.source=function(){var cancel;return{token:new CancelToken((function(c){cancel=c})),cancel:cancel}},module.exports=CancelToken},function(module,exports,__webpack_require__){"use strict";module.exports=function(callback){return function(arr){return callback.apply(null,arr)}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var internal=__webpack_require__(0);const imageWidths=function(widthSpec){let result=widthSpec.split(",").map(width=>{const parts=width.split(":");return[parseFloat(parts[1]),parts[0]]});return result=result.sort((a,b)=>a[0]-b[0]),result}("xlarge:2000,large:1000,normal:700,small:180,thumbnail:60");function pageImageUrl(document,pageNumber,desiredWidth){const size=function(desiredWidth){for(let i=0;i<imageWidths.length;i++){const[width,name]=imageWidths[i];if(desiredWidth<=width)return name}return imageWidths[imageWidths.length-1][1]}(desiredWidth);return`${document.assetUrl}documents/${document.id}/pages/${document.slug}-p${pageNumber+1}-${size}.gif?ts=${document.updatedAtTimestamp}`}function create_fragment(ctx){let div;return{c(){div=Object(internal.i)("div"),Object(internal.x)(div,"padding-top",100*ctx[0]+"%"),Object(internal.c)(div,"class","svelte-1jksr6q"),Object(internal.A)(div,"grayed",ctx[1]),Object(internal.A)(div,"crosshair",ctx[2])},m(target,anchor){Object(internal.o)(target,div,anchor),ctx[18](div)},p(ctx,[dirty]){1&dirty&&Object(internal.x)(div,"padding-top",100*ctx[0]+"%"),2&dirty&&Object(internal.A)(div,"grayed",ctx[1]),4&dirty&&Object(internal.A)(div,"crosshair",ctx[2])},i:internal.r,o:internal.r,d(detaching){detaching&&Object(internal.h)(div),ctx[18](null)}}}function instance($$self,$$props,$$invalidate){let elem,{alt:alt}=$$props,{page:page}=$$props,{width:width}=$$props,{aspect:aspect}=$$props,{grayed:grayed=!1}=$$props,{crosshair:crosshair=!1}=$$props,destroyed=!1,imgs=[],loading={},largestLoaded=-1;const IMAGE_WIDTHS="xlarge:2000,large:1000,normal:700,small:180,thumbnail:60".split(",").map(x=>x.split(":")).map(x=>[parseFloat(x[1]),x[0]]).sort((a,b)=>a[0]-b[0]),NORMAL_WIDTH=IMAGE_WIDTHS.map((x,i)=>[x,i]).filter(x=>"normal"==x[0][1])[0];let mounted=!1;function nixOlder(keepIndex){imgs.filter(x=>x[1]<keepIndex).forEach(x=>{x[0].src="",x[0].remove()})}function handleLoad(img,i){i<largestLoaded||(elem.appendChild(img),imgs.push([img,i]),-1==largestLoaded?img.style.opacity=1:(img.addEventListener("transitionend",()=>{nixOlder(i)}),setTimeout(()=>img.className="loaded",100)),largestLoaded=i)}function loadImg(i){if(i<largestLoaded)return;if(loading[i])return;loading[i]=!0;const src=pageImageUrl(page.document,page.pageNumber,IMAGE_WIDTHS[i][0]),img=new Image;return img.ondragstart=()=>!1,img.onload=()=>{destroyed||handleLoad(img,i)},img.onerror=()=>{i>0&&loadImg(i-1)},img.alt=alt,img.src=src,img}return Object(internal.t)(()=>{loadImg(0),$$invalidate(10,mounted=!0)}),Object(internal.s)(()=>{destroyed=!0,imgs.forEach(img=>img[0].src="")}),$$self.$set=$$props=>{"alt"in $$props&&$$invalidate(4,alt=$$props.alt),"page"in $$props&&$$invalidate(5,page=$$props.page),"width"in $$props&&$$invalidate(6,width=$$props.width),"aspect"in $$props&&$$invalidate(0,aspect=$$props.aspect),"grayed"in $$props&&$$invalidate(1,grayed=$$props.grayed),"crosshair"in $$props&&$$invalidate(2,crosshair=$$props.crosshair)},$$self.$$.update=()=>{if(1088&$$self.$$.dirty&&mounted){const effectiveWidth=width*(window.devicePixelRatio||1);effectiveWidth>NORMAL_WIDTH[0][0]&&loadImg(NORMAL_WIDTH[1]);let loaded=!1;for(let i=0;i<IMAGE_WIDTHS.length;i++)if(effectiveWidth<IMAGE_WIDTHS[i][0]){loadImg(i),loaded=!0;break}loaded||loadImg(IMAGE_WIDTHS.length-1)}},[aspect,grayed,crosshair,elem,alt,page,width,destroyed,loading,largestLoaded,mounted,imgs,IMAGE_WIDTHS,NORMAL_WIDTH,[],nixOlder,handleLoad,loadImg,function($$value){internal.d[$$value?"unshift":"push"](()=>{$$invalidate(3,elem=$$value)})}]}class ProgressiveImage_svelte_ProgressiveImage extends internal.a{constructor(options){var style;super(),document.getElementById("svelte-1jksr6q-style")||((style=Object(internal.i)("style")).id="svelte-1jksr6q-style",style.textContent="div.svelte-1jksr6q{position:relative;width:100%;background:white;border:solid 1px gainsboro;box-sizing:border-box}div.svelte-1jksr6q img{position:absolute;width:100%;height:100%;top:0;left:0;user-drag:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity 0.2s linear;opacity:0}div.svelte-1jksr6q img.loaded{opacity:1}div.grayed.svelte-1jksr6q{-webkit-filter:brightness(0.8);filter:brightness(0.8)}div.crosshair.svelte-1jksr6q{cursor:crosshair}",Object(internal.b)(document.head,style)),Object(internal.n)(this,options,instance,create_fragment,internal.v,{alt:4,page:5,width:6,aspect:0,grayed:1,crosshair:2})}}var ProgressiveImage_svelte=ProgressiveImage_svelte_ProgressiveImage,purify=__webpack_require__(12),purify_default=__webpack_require__.n(purify),session=__webpack_require__(2),structure_note=__webpack_require__(7),base=__webpack_require__(1);__webpack_require__(3),__webpack_require__(9),__webpack_require__(5);var api_document=__webpack_require__(24);const{document:document_1}=internal.l;function create_if_block(ctx){let div6,div0,a0,span0,t0,t1,span1,t2,t3,t4,a0_href_value,a0_title_value,t5,div2,div1,a1,a1_href_value,t6,div3,t7,div4,a2,t8,span2,a2_href_value,a2_title_value,t10,div5,current,t0_value=ctx[1].title+"",t3_value=ctx[1].page+1+"",raw_value=purify_default.a.sanitize(ctx[1].content)+"";const progressiveimage=new ProgressiveImage_svelte({props:{alt:"Page "+(ctx[1].page+1)+" of "+ctx[0].title,width:docWidth,aspect:ctx[2],page:{document:ctx[0],pageNumber:ctx[1].page}}});return{c(){div6=Object(internal.i)("div"),div0=Object(internal.i)("div"),a0=Object(internal.i)("a"),span0=Object(internal.i)("span"),t0=Object(internal.z)(t0_value),t1=Object(internal.y)(),span1=Object(internal.i)("span"),t2=Object(internal.z)("(p. "),t3=Object(internal.z)(t3_value),t4=Object(internal.z)(")"),t5=Object(internal.y)(),div2=Object(internal.i)("div"),div1=Object(internal.i)("div"),a1=Object(internal.i)("a"),Object(internal.f)(progressiveimage.$$.fragment),t6=Object(internal.y)(),div3=Object(internal.i)("div"),t7=Object(internal.y)(),div4=Object(internal.i)("div"),a2=Object(internal.i)("a"),t8=Object(internal.z)("View the entire document with\n        "),span2=Object(internal.i)("span"),span2.textContent="DocumentCloud",t10=Object(internal.y)(),div5=Object(internal.i)("div"),Object(internal.c)(span0,"class","DC-note-title svelte-3k7imf"),Object(internal.c)(span1,"class","DC-note-page-number"),Object(internal.c)(a0,"href",a0_href_value=ctx[0].noteUrl(ctx[1])),Object(internal.c)(a0,"class","DC-note-embed-resource svelte-3k7imf"),Object(internal.c)(a0,"target","_blank"),Object(internal.c)(a0,"title",a0_title_value="View the note "+ctx[1].title+" in its original document context on\n        DocumentCloud in a new window or tab"),Object(internal.c)(div0,"class","DC-note-header svelte-3k7imf"),Object(internal.c)(a1,"href",a1_href_value=ctx[0].noteUrl(ctx[1])),Object(internal.c)(a1,"target","_blank"),Object(internal.c)(a1,"class","DC-note-image-link svelte-3k7imf"),Object(internal.x)(a1,"left","-"+100*ctx[1].x1/ctx[1].width+"%"),Object(internal.x)(a1,"top","-"+100*ctx[1].y1/ctx[1].height+"%"),Object(internal.x)(a1,"width",100/ctx[1].width+"%"),Object(internal.x)(a1,"height",100/ctx[1].height+"%"),Object(internal.c)(div1,"class","DC-note-image-aspect-ratio svelte-3k7imf"),Object(internal.x)(div1,"padding-bottom",ctx[1].height/ctx[1].width*ctx[2]*100+"%"),Object(internal.c)(div2,"class","DC-note-image-max-bounds svelte-3k7imf"),Object(internal.x)(div2,"max-width",ctx[3]+"px"),Object(internal.c)(div3,"class","DC-note-body svelte-3k7imf"),Object(internal.c)(span2,"class","DC-note-logotype-link svelte-3k7imf"),Object(internal.c)(a2,"href",a2_href_value=ctx[0].noteUrl(ctx[1])),Object(internal.c)(a2,"target","_blank"),Object(internal.c)(a2,"title",a2_title_value="View the note "+ctx[1].title+" in its original document context on\n        DocumentCloud in a new window or tab"),Object(internal.c)(a2,"class","svelte-3k7imf"),Object(internal.c)(div4,"class","DC-note-credit svelte-3k7imf"),Object(internal.c)(div5,"class","DC-note-background-fader svelte-3k7imf"),Object(internal.c)(div6,"class","DC-note svelte-3k7imf"),Object(internal.x)(div6,"background-image","url("+pageImageUrl(ctx[0],ctx[1].page,ctx[4])+")")},m(target,anchor){Object(internal.o)(target,div6,anchor),Object(internal.b)(div6,div0),Object(internal.b)(div0,a0),Object(internal.b)(a0,span0),Object(internal.b)(span0,t0),Object(internal.b)(a0,t1),Object(internal.b)(a0,span1),Object(internal.b)(span1,t2),Object(internal.b)(span1,t3),Object(internal.b)(span1,t4),Object(internal.b)(div6,t5),Object(internal.b)(div6,div2),Object(internal.b)(div2,div1),Object(internal.b)(div1,a1),Object(internal.q)(progressiveimage,a1,null),Object(internal.b)(div6,t6),Object(internal.b)(div6,div3),div3.innerHTML=raw_value,Object(internal.b)(div6,t7),Object(internal.b)(div6,div4),Object(internal.b)(div4,a2),Object(internal.b)(a2,t8),Object(internal.b)(a2,span2),Object(internal.b)(div6,t10),Object(internal.b)(div6,div5),current=!0},p(ctx,dirty){(!current||2&dirty)&&t0_value!==(t0_value=ctx[1].title+"")&&Object(internal.w)(t0,t0_value),(!current||2&dirty)&&t3_value!==(t3_value=ctx[1].page+1+"")&&Object(internal.w)(t3,t3_value),(!current||3&dirty&&a0_href_value!==(a0_href_value=ctx[0].noteUrl(ctx[1])))&&Object(internal.c)(a0,"href",a0_href_value),(!current||2&dirty&&a0_title_value!==(a0_title_value="View the note "+ctx[1].title+" in its original document context on\n        DocumentCloud in a new window or tab"))&&Object(internal.c)(a0,"title",a0_title_value);const progressiveimage_changes={};3&dirty&&(progressiveimage_changes.alt="Page "+(ctx[1].page+1)+" of "+ctx[0].title),4&dirty&&(progressiveimage_changes.aspect=ctx[2]),3&dirty&&(progressiveimage_changes.page={document:ctx[0],pageNumber:ctx[1].page}),progressiveimage.$set(progressiveimage_changes),(!current||3&dirty&&a1_href_value!==(a1_href_value=ctx[0].noteUrl(ctx[1])))&&Object(internal.c)(a1,"href",a1_href_value),(!current||2&dirty)&&Object(internal.x)(a1,"left","-"+100*ctx[1].x1/ctx[1].width+"%"),(!current||2&dirty)&&Object(internal.x)(a1,"top","-"+100*ctx[1].y1/ctx[1].height+"%"),(!current||2&dirty)&&Object(internal.x)(a1,"width",100/ctx[1].width+"%"),(!current||2&dirty)&&Object(internal.x)(a1,"height",100/ctx[1].height+"%"),(!current||6&dirty)&&Object(internal.x)(div1,"padding-bottom",ctx[1].height/ctx[1].width*ctx[2]*100+"%"),(!current||8&dirty)&&Object(internal.x)(div2,"max-width",ctx[3]+"px"),(!current||2&dirty)&&raw_value!==(raw_value=purify_default.a.sanitize(ctx[1].content)+"")&&(div3.innerHTML=raw_value),(!current||3&dirty&&a2_href_value!==(a2_href_value=ctx[0].noteUrl(ctx[1])))&&Object(internal.c)(a2,"href",a2_href_value),(!current||2&dirty&&a2_title_value!==(a2_title_value="View the note "+ctx[1].title+" in its original document context on\n        DocumentCloud in a new window or tab"))&&Object(internal.c)(a2,"title",a2_title_value),(!current||3&dirty)&&Object(internal.x)(div6,"background-image","url("+pageImageUrl(ctx[0],ctx[1].page,ctx[4])+")")},i(local){current||(Object(internal.B)(progressiveimage.$$.fragment,local),current=!0)},o(local){Object(internal.C)(progressiveimage.$$.fragment,local),current=!1},d(detaching){detaching&&Object(internal.h)(div6),Object(internal.g)(progressiveimage)}}}function Note_svelte_create_fragment(ctx){let if_block_anchor,current,if_block=null!=ctx[1]&&null!=ctx[0]&&create_if_block(ctx);return{c(){if_block&&if_block.c(),if_block_anchor=Object(internal.j)()},m(target,anchor){if_block&&if_block.m(target,anchor),Object(internal.o)(target,if_block_anchor,anchor),current=!0},p(ctx,[dirty]){null!=ctx[1]&&null!=ctx[0]?if_block?(if_block.p(ctx,dirty),Object(internal.B)(if_block,1)):(if_block=create_if_block(ctx),if_block.c(),Object(internal.B)(if_block,1),if_block.m(if_block_anchor.parentNode,if_block_anchor)):if_block&&(Object(internal.m)(),Object(internal.C)(if_block,1,1,()=>{if_block=null}),Object(internal.e)())},i(local){current||(Object(internal.B)(if_block),current=!0)},o(local){Object(internal.C)(if_block),current=!1},d(detaching){if_block&&if_block.d(detaching),detaching&&Object(internal.h)(if_block_anchor)}}}const docWidth=700;function Note_svelte_instance($$self,$$props,$$invalidate){let{id:id}=$$props,{noteId:noteId}=$$props,doc=null,note=null;const LARGE_WIDTH="xlarge:2000,large:1000,normal:700,small:180,thumbnail:60".split(",").map(x=>x.split(":")).map(x=>[parseFloat(x[1]),x[0]]).sort((a,b)=>a[0]-b[0]).map((x,i)=>[x,i]).filter(x=>"large"==x[0][1])[0];let docId,aspect,maxWidth;return Object(internal.t)(async()=>{document.body.style.height="inherit",document.documentElement.style.height="inherit",$$invalidate(0,doc=await Object(api_document.a)(docId)),$$invalidate(1,note=await async function(docId,noteId){const{data:data}=await session.a.get(Object(base.a)(`documents/${docId}/notes/${noteId}/`));return new structure_note.a(data)}(docId,noteId))}),$$self.$set=$$props=>{"id"in $$props&&$$invalidate(5,id=$$props.id),"noteId"in $$props&&$$invalidate(6,noteId=$$props.noteId)},$$self.$$.update=()=>{32&$$self.$$.dirty&&(docId=id.split("-")[0]),3&$$self.$$.dirty&&$$invalidate(2,aspect=null==doc||null==note?0:doc.pageSizes[note.page]),2&$$self.$$.dirty&&$$invalidate(3,maxWidth=null==note?0:docWidth*note.width)},[doc,note,aspect,maxWidth,LARGE_WIDTH,id,noteId]}class Note_svelte_Note extends internal.a{constructor(options){var style;super(),document_1.getElementById("svelte-3k7imf-style")||((style=Object(internal.i)("style")).id="svelte-3k7imf-style",style.textContent='.DC-note.svelte-3k7imf.svelte-3k7imf{position:relative;padding:0 0.5em;margin:2em 0;border:1px solid #ebebeb;box-shadow:inset 0 0 40px #505050;font:400 10pt/14pt -apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;color:black;background-color:white;background-size:100% auto;background-repeat:no-repeat;background-position:center center}.DC-note.svelte-3k7imf a.svelte-3k7imf{color:#5a76a0;text-decoration:underline}.DC-note.svelte-3k7imf>.svelte-3k7imf{position:relative;z-index:1}.DC-note.svelte-3k7imf .DC-note-header.svelte-3k7imf,.DC-note.svelte-3k7imf .DC-note-body.svelte-3k7imf,.DC-note.svelte-3k7imf .DC-note-credit.svelte-3k7imf{margin:10px auto;padding:0 5px;max-width:600px}.DC-note.svelte-3k7imf .DC-note-title.svelte-3k7imf{font-weight:bold}.DC-note.svelte-3k7imf .DC-note-image-max-bounds.svelte-3k7imf{box-sizing:border-box;border:2px solid #ffe325;border-radius:3px;box-shadow:0 0 7px rgba(0, 0, 0, 0.25);position:relative;font-size:0;overflow:hidden;margin:10px auto}.DC-note.svelte-3k7imf .DC-note-image-max-bounds .DC-note-image-aspect-ratio.svelte-3k7imf{position:relative;overflow:hidden;height:0;max-width:100%}.DC-note.svelte-3k7imf .DC-note-image-max-bounds .DC-note-image-aspect-ratio .DC-note-image-link.svelte-3k7imf{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;overflow:hidden;display:block}.DC-note.svelte-3k7imf .DC-note-image-max-bounds .DC-note-image-aspect-ratio .DC-note-image-link.svelte-3k7imf img{margin:0 !important;border:0 !important;outline:0 !important;max-width:none !important;max-height:none !important;display:block !important;position:absolute;height:auto}.DC-note.svelte-3k7imf .DC-note-credit.svelte-3k7imf{font-size:0.9em}.DC-note.svelte-3k7imf .DC-note-logotype-link.svelte-3k7imf{font-weight:700;font-family:-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif}.DC-note.svelte-3k7imf .DC-note-background-fader.svelte-3k7imf{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;z-index:0;background-color:rgba(255, 255, 255, 0.93)}',Object(internal.b)(document_1.head,style)),Object(internal.n)(this,options,Note_svelte_instance,Note_svelte_create_fragment,internal.v,{id:5,noteId:6})}}var Note_svelte=Note_svelte_Note;null==window.dc&&(window.dc={}),null==window.dc.embed&&(window.dc.embed={}),null==window.dc.embed.loadNote&&(window.dc.embed.loadNote=function(src){const parts=src.split("/").slice(-3);if(3!=parts.length)return;const id=parts[0].split("-")[0],noteId=parts[2].replace(/[^0-9]/g,"");document.querySelectorAll("#DC-note-"+noteId).forEach(noteElem=>{-1==noteElem.className.indexOf("DC-embed-enhanced")&&(noteElem.className+=" DC-embed-enhanced",new Note_svelte({target:noteElem,props:{id:id,noteId:noteId}}))})})}]);